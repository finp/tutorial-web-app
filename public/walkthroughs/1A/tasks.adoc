
:walkthrough: Integrating event-driven and API-driven applications (EnMasse)

// Module included in the following assemblies:
//
// <List assemblies here, each on a new line>

// Base the file name and the ID on the module title. For example:
// * file name: doing-procedure-a.adoc
// * ID: [id='doing-procedure-a']
// * Title: = Doing procedure A

// The ID is used as an anchor for linking to the module. Avoid changing it after the module has been published to ensure existing links are not broken.
[id='creating-addresses_{context}']
// The `context` attribute enables module reuse. Every module's ID includes {context}, which ensures that the module has a unique ID even if it is reused multiple times in a guide.

// TODO: figure out enmasse url
:enmasse-url: https://console-enmasse.apps.city.openshiftworkshop.com/console/my-example-space
// https://console-enmasse-my-example-space.apps.city.openshiftworkshop.com/#/dashboard


= Creating an address in EnMasse space


. Log into link:{messaging-url}[EnMasse, window="_blank"] by selecting the *OpenShift* button on the log in screen and accepting the permissions request.
. Select *Addresses* from the left hand menu.

. Create a *requests* address:
.. Select the *Create* button to start the *Create new address* wizard.
.. Enter `work-queue/requests` as the address name.
.. Select *queue* as the type and click *Next*.
.. Select *Pooled Queue* as the address plan and click *Next*.
.. Select *Create* to complete the wizard.

After the address is created a green check mark is displayed.





:leveloffset!:

:leveloffset: 1

// This assembly is included in the following assemblies:
//
// <List assemblies here, each on a new line>

// Save the context of the assembly that is including this one.
// This is necessary for including assemblies in assemblies.
// See also the complementary step on the last line of this file.

// Base the file name and the ID on the assembly title. For example:
// * file name: my-assembly-a.adoc
// * ID: [id='my-assembly-a']
// * Title: = My assembly A

// The ID is used as an anchor for linking to the module. Avoid changing it after the module has been published to ensure existing links are not broken.
[id='creating-connections']
// If the assembly is reused in other assemblies in a guide, include {context} in the ID: [id='a-collection-of-modules-{context}'].

= Creating connections

//If the assembly covers a task, start the title with a verb in the gerund form, such as Creating or Configuring.
:context: creating-connections
// The `context` attribute enables module reuse. Every module's ID includes {context}, which ensures that the module has a unique ID even if it is reused multiple times in a guide.


:leveloffset: 2

// Module included in the following assemblies:
//
// <List assemblies here, each on a new line>


[id='creating-api-connector_{context}']
= Creating an API Connector

. Log in to the link:{fuse-url}[Red Hat Fuse Online, window="_blank"] console.

. Select *Customizations* from the left hand menu.

. Select the *Create API Connector* button to start the *API Client Connector* wizard.

. When prompted to *Upload OpenAPI Specification*, select *Use a URL*.
.. Enter the following in the URL field. `http://{spring-boot-url}/v2/api-docs`
.. Click *Next*

. When prompted with *Review Actions*, select *Next*.

. When prompted with *Specify Security*, select *Next*.

. When prompted with *Review/Edit Connector Details*
.. Enter the following in the *Connector Name* field, `Walkthrough {walkthrough-id} CRUD Connector`.
.. Click *Create API Connector*




:leveloffset!:

:leveloffset: 2

// Module included in the following assemblies:
//
// <List assemblies here, each on a new line>


[id='creating-http-connection-in-fuse_{context}']
= Creating HTTP connection to CRUD App



. Log in to the link:{fuse-url}[Red Hat Fuse Online, window="_blank"] console.

. Select *Connections* from the left hand menu.

. Select the *Create Connection* button to start the *Create Connection* wizard.

. When prompted with *Select Connector*, select *Walkthrough {walkthrough-id} CRUD Connector*.

. When prompted with *Walkthrough {walkthrough-id} CRUD Configuration*, click *Next*.

. When prompted with *Add Connection Details*
.. Enter the following in the *Connection Name* field, `Walkthrough {walkthrough-id} CRUD App`
.. Click *Create*




:leveloffset!:

:leveloffset: 2

// Module included in the following assemblies:
//
// <List assemblies here, each on a new line>

:enmasse: Red Hat AMQ Online

[id='creating-amqp-connection-in-fuse_{context}']

= Creating AMQP connection in Red Hat Fuse Online



:fuse-url: https://eval.apps.city.openshiftworkshop.com/
:openshift-url: https://master.city.openshiftworkshop.com/console/project/eval/overview

. Log in to the link:{fuse-url}[Red Hat Fuse Online, window="_blank"] console.

. Select *Connections* from the left hand menu.

. Select the *Create Connection* button to start the *Create Connection* wizard.

. Select *AMQP* to configure an *AMQP Message Broker* connection.

. Enter the following, using the configuration values relating to {enmasse}:
+
* Connection URI: `amqp://{messaging-broker-url}:5672?amqp.saslMechanisms=PLAIN`
* User Name: `{messaging-username}`
* Password: `{messaging-password}`

. Set the value of *Check Certificates* to `Disable`.

. Select the *Validate* button to check that the values are valid.

. Click *Next* and enter a name for the connection, for example, `Walkthrough {walkthrough-id} Messaging App`.

. Click *Create*.



:leveloffset!:












